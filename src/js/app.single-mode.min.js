"use strict"; const img = document.querySelector(".main__img"), currentScore1 = document.querySelector(".main__current-score-1"), currentScore2 = document.querySelector(".main__current-score-2"), totalScore1 = document.querySelector(".main__total-score-1"), totalScore2 = document.querySelector(".main__total-score-2"), firstPlayer = document.querySelector(".main__player-1"), secondPlayer = document.querySelector(".main__player-2"), btnNewGame = document.querySelector(".header__button"), btnNextMove = document.querySelector(".main__button-dice"), btnFixsing = document.querySelector(".main__button-pass"); let machineMove, firstPlayerMove = !0, dice = 0, firstPlayerTotalScore = 0, secondPlayerTotalScore = 0, firstPlayerCurrentScore = 0, secondPlayerCurrentScore = 0; const opacity = () => { firstPlayer.classList.toggle("opacity"), secondPlayer.classList.toggle("opacity") }, btnToggle = e => { e ? (btnNextMove.classList.add("hidden"), btnFixsing.classList.add("hidden")) : (btnNextMove.classList.remove("hidden"), btnFixsing.classList.remove("hidden")) }, numberOne = () => { firstPlayerMove = !firstPlayerMove, dice = 0, currentScore2.textContent = 0, secondPlayerCurrentScore = 0, currentScore1.textContent = 0, firstPlayerCurrentScore = 0, opacity() }, machineFixed = () => { secondPlayerTotalScore += secondPlayerCurrentScore, totalScore2.textContent = secondPlayerTotalScore, currentScore2.textContent = 0, secondPlayerCurrentScore = 0, btnToggle(!1), firstPlayerMove = !firstPlayerMove, dice = 0, opacity() }, machineGame = () => { dice = dice ? Math.trunc(6 * Math.random() + 1) : Math.trunc(5 * Math.random() + 2), img.src = `./src/img/dice/dice-${dice}.svg`, secondPlayerCurrentScore += dice, currentScore2.textContent = secondPlayerCurrentScore, 1 == dice && (numberOne(), clearInterval(machineMove), btnToggle(!1)), secondPlayerCurrentScore + secondPlayerTotalScore > 99 && (clearInterval(machineMove), endGame(), secondPlayer.classList.add("winner"), opacity(), secondPlayerTotalScore += secondPlayerCurrentScore, totalScore2.textContent = secondPlayerTotalScore, currentScore2.textContent = 0), secondPlayerCurrentScore >= 25 && secondPlayerTotalScore < 50 && firstPlayerTotalScore < 85 && (clearInterval(machineMove), setTimeout(function () { machineFixed() }, 1200)), secondPlayerCurrentScore >= 15 && secondPlayerTotalScore >= 50 && firstPlayerTotalScore < 85 && secondPlayerCurrentScore + secondPlayerTotalScore < 90 && (clearInterval(machineMove), setTimeout(function () { machineFixed() }, 1200)) }; btnNextMove.addEventListener("click", () => { dice = dice ? Math.trunc(6 * Math.random() + 1) : Math.trunc(5 * Math.random() + 2), img.src = `./src/img/dice/dice-${dice}.svg`, 1 == dice && numberOne(), firstPlayerMove ? (firstPlayerCurrentScore += dice, currentScore1.textContent = firstPlayerCurrentScore, firstPlayerCurrentScore + firstPlayerTotalScore > 99 && (fixScore(), endGame(), firstPlayer.classList.add("winner"))) : (btnToggle(!0), machineMove = setInterval(machineGame, 1e3)) }); const fixScore = () => { btnToggle(!0), firstPlayerMove = !firstPlayerMove, dice = 0, firstPlayerTotalScore += firstPlayerCurrentScore, totalScore1.textContent = firstPlayerTotalScore, currentScore1.textContent = 0, firstPlayerCurrentScore = 0, opacity(), firstPlayerTotalScore < 100 && (machineMove = setInterval(machineGame, 1e3)) }; btnFixsing.addEventListener("click", fixScore); const endGame = () => { opacity(), btnToggle(!0), img.src = "./src/img/star/star.svg" }; btnNewGame.addEventListener("click", () => { clearInterval(machineMove), dice = 0, firstPlayerMove = !0, firstPlayerTotalScore = 0, secondPlayerTotalScore = 0, firstPlayerCurrentScore = 0, secondPlayerCurrentScore = 0, currentScore1.textContent = 0, currentScore2.textContent = 0, totalScore1.textContent = 0, totalScore2.textContent = 0, firstPlayer.classList.remove("opacity"), secondPlayer.classList.add("opacity"), img.src = "./src/img/dice/dices.svg", firstPlayer.classList.remove("winner"), secondPlayer.classList.remove("winner"), btnToggle(!1) });